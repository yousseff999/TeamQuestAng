<body class="index-page bg-gradient-to-br from-indigo-100 to-teal-100 min-h-screen">
    <!-- Header -->
    <header id="header" class="header d-flex align-items-center fixed-top shadow-lg bg-gray-800 bg-opacity-95 backdrop-blur-sm">
      <div class="container-fluid container-xl position-relative d-flex align-items-center">
        <a href="index.html" class="logo d-flex align-items-center me-auto">
          <h1 class="sitename text-2xl font-extrabold text-indigo-400 tracking-wide">TeamQuest</h1>
        </a>
        <nav id="navmenu" class="navmenu">
          <ul class="flex space-x-6">
            <li><a href="#" class="nav-link text-gray-200 hover:text-teal-400 transition duration-300 font-medium cursor-pointer">Home</a></li>
            <li><a href="#about" class="nav-link text-gray-200 hover:text-teal-400 transition duration-300 font-medium">About</a></li>
            <li><a href="#services" class="nav-link text-gray-200 hover:text-teal-400 transition duration-300 font-medium">Services</a></li>
            <li><a href="#portfolio" class="nav-link text-gray-200 hover:text-teal-400 transition duration-300 font-medium">Portfolio</a></li>
            <li class="dropdown relative">
              <a href="#" class="nav-link text-gray-200 hover:text-teal-400 transition duration-300 font-medium flex items-center">
                <i class="fad fa-calendar-alt text-xs mr-2"></i>
                <span>Team</span>
                <i class="bi bi-chevron-down toggle-dropdown ml-1"></i>
              </a>
              <ul class="dropdown-menu absolute hidden bg-gray-700 shadow-xl rounded-lg mt-2 w-48 z-10">
                <li><a href="#all-teams" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300">All Teams</a></li>
                <li><a href="#create-team" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300">Create Team</a></li>
              </ul>
            </li>
            <li class="dropdown relative">
              <a href="#" class="nav-link text-gray-200 hover:text-teal-400 transition duration-300 font-medium flex items-center">
                <span>Event</span>
                <i class="bi bi-chevron-down toggle-dropdown ml-1"></i>
              </a>
              <ul class="dropdown-menu absolute hidden bg-gray-700 shadow-xl rounded-lg mt-2 w-48 z-10">
                <li><a href="#" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300">Dropdown 1</a></li>
                <li class="dropdown relative">
                  <a href="#" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300 flex items-center">
                    <span>Deep Dropdown</span>
                    <i class="bi bi-chevron-down toggle-dropdown ml-1"></i>
                  </a>
                  <ul class="dropdown-menu absolute hidden bg-gray-700 shadow-xl rounded-lg ml-48 -mt-10 w-48">
                    <li><a href="#" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300">Deep Dropdown 1</a></li>
                    <li><a href="#" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300">Deep Dropdown 2</a></li>
                    <li><a href="#" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300">Deep Dropdown 3</a></li>
                    <li><a href="#" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300">Deep Dropdown 4</a></li>
                    <li><a href="#" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300">Deep Dropdown 5</a></li>
                  </ul>
                </li>
                <li><a href="#" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300">Dropdown 2</a></li>
                <li><a href="#" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300">Dropdown 3</a></li>
                <li><a href="#" class="block px-4 py-2 text-gray-200 hover:bg-gray-600 hover:text-teal-400 transition duration-300">Dropdown 4</a></li>
              </ul>
            </li>
            <li><a href="#contact" class="nav-link text-gray-200 hover:text-teal-400 transition duration-300 font-medium">Contact</a></li>
          </ul>
          <i class="mobile-nav-toggle d-xl-none bi bi-list text-gray-200 cursor-pointer"></i>
        </nav>
      </div>
    </header>
  
    <main class="p-6 bg-gray-100 min-h-screen">
        <h1 class="text-3xl font-bold text-center mb-6">Rejoindre une équipe</h1>
      
        <!-- Message Display -->
        <div *ngIf="message" class="mb-6 p-4 rounded-lg text-white text-center font-medium" [ngClass]="message.type === 'success' ? 'bg-green-600' : 'bg-red-600'">
          {{ message.text }}
        </div>
      
        <!-- Loading Spinner for Team Loading -->
        <div *ngIf="isLoading" class="flex justify-center mb-6">
          <svg class="animate-spin h-8 w-8 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
        </div>
      
        <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div *ngFor="let team of teams" class="bg-white shadow-md rounded-lg p-5">
            <h2 class="text-xl font-semibold mb-2">{{ team.name }}</h2>
            <p class="text-gray-600 mb-1">{{ team.description }}</p>
            <p class="text-sm text-gray-400 mb-2">Créée le : {{ team.creationDate | date: 'mediumDate' }}</p>
      
            <div class="mb-4">
              <p class="font-medium">Membres :</p>
              <ul class="list-disc list-inside ml-4">
                <li *ngFor="let user of team.members">{{ user.username }}</li>
                <li *ngIf="team.members.length === 0" class="italic text-gray-400">Aucun membre pour le moment</li>
              </ul>
            </div>
      
            <button 
  class="w-full py-2 px-4 bg-orange-500 text-white font-semibold rounded hover:bg-orange-600 transition flex items-center justify-center"
  (click)="joinTeam(team.id)"
  [disabled]="loadingTeamId === team.id || !currentUserId">
  <span *ngIf="loadingTeamId !== team.id">Rejoindre</span>
  <span *ngIf="loadingTeamId === team.id" class="flex items-center">
    <svg class="animate-spin h-5 w-5 mr-2 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
    </svg>
    Joining...
  </span>
</button>

          </div>
        </section>
      </main>
      
  
    <!-- Footer -->
    <footer id="footer" class="footer dark-background">
    
        <div class="container footer-top">
        <div class="row gy-4">
            <div class="col-lg-4 col-md-6 footer-about">
            <a href="index.html" class="logo d-flex align-items-center">
                <span class="sitename">Dewi</span>
            </a>
            <div class="footer-contact pt-3">
                <p>A108 Adam Street</p>
                <p>New York, NY 535022</p>
                <p class="mt-3"><strong>Phone:</strong> <span>+1 5589 55488 55</span></p>
                <p><strong>Email:</strong> <span>info@example.com</span></p>
            </div>
            <div class="social-links d-flex mt-4">
                <a href=""><i class="bi bi-twitter-x"></i></a>
                <a href=""><i class="bi bi-facebook"></i></a>
                <a href=""><i class="bi bi-instagram"></i></a>
                <a href=""><i class="bi bi-linkedin"></i></a>
            </div>
            </div>
    
            <div class="col-lg-2 col-md-3 footer-links">
            <h4>Useful Links</h4>
            <ul>
                <li><i class="bi bi-chevron-right"></i> <a href="#">Home</a></li>
                <li><i class="bi bi-chevron-right"></i> <a href="#">About us</a></li>
                <li><i class="bi bi-chevron-right"></i> <a href="#">Services</a></li>
                <li><i class="bi bi-chevron-right"></i> <a href="#">Terms of service</a></li>
                <li><i class="bi bi-chevron-right"></i> <a href="#">Privacy policy</a></li>
            </ul>
            </div>
    
            <div class="col-lg-2 col-md-3 footer-links">
            <h4>Our Services</h4>
            <ul>
                <li><i class="bi bi-chevron-right"></i> <a href="#">Web Design</a></li>
                <li><i class="bi bi-chevron-right"></i> <a href="#">Web Development</a></li>
                <li><i class="bi bi-chevron-right"></i> <a href="#">Product Management</a></li>
                <li><i class="bi bi-chevron-right"></i> <a href="#">Marketing</a></li>
                <li><i class="bi bi-chevron-right"></i> <a href="#">Graphic Design</a></li>
            </ul>
            </div>
    
            <div class="col-lg-4 col-md-12 footer-newsletter">
            <h4>Our Newsletter</h4>
            <p>Subscribe to our newsletter and receive the latest news about our products and services!</p>
            <form action="forms/newsletter.php" method="post" class="php-email-form">
                <div class="newsletter-form"><input type="email" name="email"><input type="submit" value="Subscribe"></div>
                <div class="loading">Loading</div>
                <div class="error-message"></div>
                <div class="sent-message">Your subscription request has been sent. Thank you!</div>
            </form>
            </div>
    
        </div>
        </div>
    
        <div class="container copyright text-center mt-4">
        <p>© <span>Copyright</span> <strong class="px-1 sitename">Dewi</strong> <span>All Rights Reserved</span></p>
        <div class="credits">
            Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a> Distributed by <a href="https://themewagon.com">ThemeWagon</a>
        </div>
        </div>
    
    </footer>
  </body>